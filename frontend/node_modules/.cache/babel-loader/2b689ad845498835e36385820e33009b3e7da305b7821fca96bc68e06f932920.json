{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\multicampus\\\\Desktop\\\\S08P22C104\\\\frontend\\\\src\\\\pages\\\\Library\\\\LibraryList.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\n// Components\nimport LibraryModal from \"./LibraryModal\";\n// Types\n\n// APIs\nimport { getLibraryAPI, getRegionCodeAPI } from \"../../apis/library\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function LibraryList() {\n  _s();\n  const ISBN = useParams().ISBN;\n  console.log(ISBN);\n  const [selectedLib, setSelectedLib] = useState(0);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [libs, setLibs] = useState([]);\n  const [position, setPosition] = useState([-1, -1]);\n  const [regionCode, setRegionCode] = useState(-1);\n  useEffect(() => {\n    // 현재 좌표 구하기\n    navigator.geolocation.getCurrentPosition(position => {\n      setPosition([position.coords.longitude, position.coords.latitude]);\n    });\n  }, []);\n\n  // 좌표로 지역코드 받아오기\n  useEffect(() => {\n    if (position[0] !== -1) {\n      getRegionCode();\n    }\n  }, [position]);\n  const getRegionCode = async () => {\n    const data = await getRegionCodeAPI(position[0], position[1]);\n    setRegionCode(data === null || data === void 0 ? void 0 : data.regionCode);\n  };\n  useEffect(() => {\n    if (regionCode !== -1) {\n      getLibrary();\n    }\n  }, [regionCode]);\n\n  // 도서 소장 도서관 조회\n  const getLibrary = async () => {\n    const data = await getLibraryAPI(ISBN, regionCode);\n    let tmp = [];\n    data.forEach(lib => {\n      tmp.push({\n        libCode: Number(lib.lib.libCode),\n        libName: lib.lib.libName,\n        address: lib.lib.address,\n        latitude: Number(lib.lib.latitude),\n        longitude: Number(lib.lib.longitude),\n        homepage: lib.lib.homepage,\n        closed: lib.lib.closed,\n        operatingTime: lib.lib.operatingTime,\n        tel: lib.lib.tel\n      });\n    });\n    console.log(tmp);\n    setLibs(tmp);\n  };\n\n  // 모달 열고 닫기\n  const openModal = libCode => {\n    setModalOpen(true);\n    setSelectedLib(libCode);\n  };\n  const closeModal = () => {\n    setModalOpen(false);\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [\" \", libs === null || libs === void 0 ? void 0 : libs.map(lib => {\n        return /*#__PURE__*/_jsxDEV(Item, {\n          children: [/*#__PURE__*/_jsxDEV(ItemName, {\n            onClick: () => {\n              openModal(lib.libCode);\n            },\n            children: lib.libName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ItemDist, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)]\n        }, lib.libCode, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true), modalOpen && /*#__PURE__*/_jsxDEV(LibraryModal, {\n      modalOpen: modalOpen,\n      closeModal: closeModal,\n      libCode: selectedLib\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(LibraryList, \"qsjCHR4Efp70gj4Rf9akQtGgwPU=\", false, function () {\n  return [useParams];\n});\n_c = LibraryList;\nconst Container = styled.div`\n  width: 100%;\n`;\n_c2 = Container;\nconst Item = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 9% 0 9% 8%;\n  border-bottom: 0.2px solid #bfbfbf;\n`;\n_c3 = Item;\nconst ItemName = styled.div`\n  font-weight: 400;\n  color: #5c5649;\n  font-size: 16px;\n  margin-right: 3%;\n`;\n_c4 = ItemName;\nconst ItemDist = styled.div`\n  font-weight: 400;\n  font-size: 13px;\n  color: #c2bfbb;\n`;\n_c5 = ItemDist;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"LibraryList\");\n$RefreshReg$(_c2, \"Container\");\n$RefreshReg$(_c3, \"Item\");\n$RefreshReg$(_c4, \"ItemName\");\n$RefreshReg$(_c5, \"ItemDist\");","map":{"version":3,"names":["React","useState","useEffect","useParams","styled","LibraryModal","getLibraryAPI","getRegionCodeAPI","jsxDEV","_jsxDEV","Fragment","_Fragment","LibraryList","_s","ISBN","console","log","selectedLib","setSelectedLib","modalOpen","setModalOpen","libs","setLibs","position","setPosition","regionCode","setRegionCode","navigator","geolocation","getCurrentPosition","coords","longitude","latitude","getRegionCode","data","getLibrary","tmp","forEach","lib","push","libCode","Number","libName","address","homepage","closed","operatingTime","tel","openModal","closeModal","Container","children","map","Item","ItemName","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ItemDist","_c","div","_c2","_c3","_c4","_c5","$RefreshReg$"],"sources":["C:/Users/multicampus/Desktop/S08P22C104/frontend/src/pages/Library/LibraryList.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\n// Components\r\nimport LibraryModal from \"./LibraryModal\";\r\n// Types\r\nimport { LibraryType } from \"../../Store/Types\";\r\n// APIs\r\nimport { getLibraryAPI, getRegionCodeAPI } from \"../../apis/library\";\r\n\r\nexport default function LibraryList() {\r\n  const ISBN = useParams().ISBN;\r\n  console.log(ISBN)\r\n  const [selectedLib, setSelectedLib] = useState<number>(0);\r\n  const [modalOpen, setModalOpen] = useState<boolean>(false);\r\n  const [libs, setLibs] = useState<LibraryType[]>([]);\r\n  const [position, setPosition] = useState<[number, number]>([-1, -1]);\r\n  const [regionCode, setRegionCode] = useState<any>(-1);\r\n\r\n  useEffect(() => {\r\n    // 현재 좌표 구하기\r\n    navigator.geolocation.getCurrentPosition((position) => {\r\n      setPosition([position.coords.longitude, position.coords.latitude]);\r\n    });\r\n  }, []);\r\n\r\n  // 좌표로 지역코드 받아오기\r\n  useEffect(() => {\r\n    if (position[0] !== -1) {\r\n      getRegionCode();\r\n    }\r\n  }, [position]);\r\n\r\n  const getRegionCode = async () => {\r\n    const data = await getRegionCodeAPI(position[0], position[1]);\r\n    setRegionCode(data?.regionCode);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (regionCode !== -1) {\r\n      getLibrary();\r\n    }\r\n  }, [regionCode]);\r\n\r\n  // 도서 소장 도서관 조회\r\n  const getLibrary = async () => {\r\n    const data = await getLibraryAPI(ISBN, regionCode);\r\n\r\n    let tmp: LibraryType[] = [];\r\n    data.forEach((lib: any) => {\r\n      tmp.push({\r\n        libCode: Number(lib.lib.libCode),\r\n        libName: lib.lib.libName,\r\n        address: lib.lib.address,\r\n        latitude: Number(lib.lib.latitude),\r\n        longitude: Number(lib.lib.longitude),\r\n        homepage: lib.lib.homepage,\r\n        closed: lib.lib.closed,\r\n        operatingTime: lib.lib.operatingTime,\r\n        tel: lib.lib.tel,\r\n      });\r\n    });\r\n    console.log(tmp)\r\n    setLibs(tmp);\r\n  };\r\n\r\n  // 모달 열고 닫기\r\n  const openModal = (libCode: number) => {\r\n    setModalOpen(true);\r\n    setSelectedLib(libCode);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <>\r\n        {\" \"}\r\n        {libs?.map((lib) => {\r\n          return (\r\n            <Item key={lib.libCode}>\r\n              <ItemName\r\n                onClick={() => {\r\n                  openModal(lib.libCode);\r\n                }}\r\n              >\r\n                {lib.libName}\r\n              </ItemName>\r\n              <ItemDist>{}</ItemDist>\r\n            </Item>\r\n          );\r\n        })}\r\n      </>\r\n      {modalOpen && (\r\n        <LibraryModal\r\n          modalOpen={modalOpen}\r\n          closeModal={closeModal}\r\n          libCode={selectedLib}\r\n        />\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst Item = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 9% 0 9% 8%;\r\n  border-bottom: 0.2px solid #bfbfbf;\r\n`;\r\n\r\nconst ItemName = styled.div`\r\n  font-weight: 400;\r\n  color: #5c5649;\r\n  font-size: 16px;\r\n  margin-right: 3%;\r\n`;\r\n\r\nconst ItemDist = styled.div`\r\n  font-weight: 400;\r\n  font-size: 13px;\r\n  color: #c2bfbb;\r\n`;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}